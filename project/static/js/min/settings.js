'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};
$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,a){var c=$jscomp.propertyToPolyfillSymbol[a];if(null==c)return b[a];c=b[c];return void 0!==c?c:b[a]};$jscomp.polyfill=function(b,a,c,e){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,a,c,e):$jscomp.polyfillUnisolated(b,a,c,e))};
$jscomp.polyfillUnisolated=function(b,a,c,e){c=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var d=b[e];if(!(d in c))return;c=c[d]}b=b[b.length-1];e=c[b];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(b,a,c,e){var d=b.split(".");b=1===d.length;e=d[0];e=!b&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<d.length-1;f++){var g=d[f];if(!(g in e))return;e=e[g]}d=d[d.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?e[d]:null;a=a(c);null!=a&&(b?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:a}):a!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[d]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+c+"$"+d),$jscomp.defineProperty(e,$jscomp.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:a})))};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};
$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return{value:b}};$jscomp.generator.Context.prototype.yieldAll=function(b,a){b=$jscomp.makeIterator(b);var c=b.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=a;else return this.yieldAllIterator_=b,this.yield(c.value,a)};
$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;void 0!=a&&(this.finallyAddress_=a)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,a,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=a||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,a){a=this.finallyContexts_.splice(a||0)[0];if(a=this.abruptCompletion_=this.abruptCompletion_||a){if(a.isException)return this.jumpToErrorHandler_();void 0!=a.jumpTo&&this.finallyAddress_<a.jumpTo?(this.nextAddress=a.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var a in b)this.properties_.push(a);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a)return this.yieldAllStep_("return"in a?a["return"]:function(c){return{value:c,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,a,c){try{var e=b.call(this.context_.yieldAllIterator_,a);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var d=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,d);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(a){this.context_.yieldResult=void 0,this.context_.throw_(a)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(a){return b.next_(a)};this.throw=function(a){return b.throw_(a)};this.return=function(a){return b.return_(a)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,a){a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a));$jscomp.setPrototypeOf&&b.prototype&&$jscomp.setPrototypeOf(a,b.prototype);return a};
$jscomp.asyncExecutePromiseGenerator=function(b){function a(e){return b.next(e)}function c(e){return b.throw(e)}return new Promise(function(e,d){function f(g){g.done?e(g.value):Promise.resolve(g.value).then(a,c).then(f,d)}f(b.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(b){return $jscomp.asyncExecutePromiseGenerator(b())};$jscomp.asyncExecutePromiseGeneratorProgram=function(b){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b)))};
var csrftoken=$("meta[name=csrf-token]").attr("content");window.csrfprotect=b=>{b["X-CSRFToken"]=csrftoken;return b};
$(document).ready(function(){$(".dropdown-trigger").dropdown({alignment:"right",constrainWidth:!1,coverTrigger:!1});$(".tooltipped").tooltip();M.updateTextFields();dayjs.extend(window.dayjs_plugin_utc);dayjs.extend(window.dayjs_plugin_relativeTime);window.Book=class{constructor(d){this.googleId=null==d?void 0:d.id;let f;this.title=null==d?void 0:null==(f=d.volumeInfo)?void 0:f.title;let g,h,k;this.isbn=null==d?void 0:null==(g=d.volumeInfo)?void 0:null==(h=g.industryIdentifiers)?void 0:null==(k=h.find(I=>
"ISBN_13"==I.type))?void 0:k.identifier;let l;this.authors=null==d?void 0:null==(l=d.volumeInfo)?void 0:l.authors;let m;this.language=null==d?void 0:null==(m=d.volumeInfo)?void 0:m.language;let n;this.publisher=null==d?void 0:null==(n=d.volumeInfo)?void 0:n.publisher;let p;this.publishedDate=null==d?void 0:null==(p=d.volumeInfo)?void 0:p.publishedDate;let q;this.pageCount=null==d?void 0:null==(q=d.volumeInfo)?void 0:q.pageCount;let r,t;this.height=null==d?void 0:null==(r=d.volumeInfo)?void 0:null==
(t=r.dimensions)?void 0:t.height;let u,v;this.width=null==d?void 0:null==(u=d.volumeInfo)?void 0:null==(v=u.dimensions)?void 0:v.width;let w,x;this.thickness=null==d?void 0:null==(w=d.volumeInfo)?void 0:null==(x=w.dimensions)?void 0:x.thickness;let y;this.imagelinks=null==d?void 0:null==(y=d.volumeInfo)?void 0:y.imageLinks;let z,A;this.thumbSmall=null==(z=this.imagelinks)?void 0:null==(A=z.smallThumbnail)?void 0:A.replace("http","https");let B,C,D,E,F,G;this.thumbLarge=(null==(B=this.imagelinks)?
0:B.extraLarge)?this.imagelinks.extraLarge:(null==(C=this.imagelinks)?0:C.large)?this.imagelinks.large:(null==(D=this.imagelinks)?0:D.medium)?this.imagelinks.medium:(null==(E=this.imagelinks)?0:E.small)?this.imagelinks.small:(null==(F=this.imagelinks)?0:F.thumbnail)?this.imagelinks.thumbnail:null==(G=this.imagelinks)?void 0:G.smallThumbnail;let H;this.thumbLarge=null==(H=this.thumbLarge)?void 0:H.replace("http","https");this.strings={};this.strings.title=this.title||"Unknown";this.strings.isbn=this.isbn||
"Unknown";this.strings.authors=this.authors?this.authors.join(this.language&&this.language.includes("en")?", ":"„ÄÅ"):"Unknown";this.strings.plurality=this.authors?1<this.authors.length?"s":"":"";this.strings.publisher=this.publisher||"Unknown";this.strings.publishedDate=this.publishedDate||"Unknown";this.strings.pageCount=this.pageCount||"Unknown";this.strings.dimensions=this.height&&this.width&&this.thickness?`Height - ${this.height}, Width - ${this.width}, Thickness - ${this.thickness}`:"Unknown";
this.strings.thumbSmall=this.thumbSmall?this.thumbSmall:this.thumbLarge?this.thumbLarge:"https://books.google.com.hk/googlebooks/images/no_cover_thumb.gif"}};window.Listing=class{constructor(d){for(const f in d)this[f]=d[f];this.strings={};d=dayjs(1E3*this.created).local();this.strings.created=`${d.format("DD/MM/YYYY HH:mm:ss")} (${d.fromNow()})`;this.strings.open=this.open?"Public":"Hidden";this.strings.openIcon=this.open?"visibility":"visibility_off";switch(this.condition){case 0:this.strings.condition=
"Poor";this.strings.conditionDescription="Significant wear, possibly with a broken spine, loose joints or missing pages";this.strings.conditionClass="condition-poor";break;case 1:this.strings.condition="Fair";this.strings.conditionDescription="Some wear, possibly with folded pages, scratches or dents";this.strings.conditionClass="condition-fair";break;case 2:this.strings.condition="Good";this.strings.conditionDescription="Minor wear, but will still show signs of previous ownership";this.strings.conditionClass=
"condition-good";break;case 3:this.strings.condition="Fine",this.strings.conditionDescription="Very minor defects and faults, like brand new",this.strings.conditionClass="condition-fine"}switch(this.notes){case 0:this.strings.notes="None";break;case 1:this.strings.notes="Some";break;case 2:this.strings.notes="Comprehensive"}this.strings.price=`HKD ${this.price}`;this.strings.remarks=this.remarks||"---"}};class b extends Error{constructor(d){super(d)}}class a extends Error{constructor(d){super(d);
this.message=`${d.status}: ${d.statusText}`}}class c extends Error{constructor(d){super(d);this.message=`${d.code}: ${d.message}`}}class e extends Error{constructor(){super();this.message="No results found."}}window.NetworkError=a;window.APIError=c;window.NoGoogleBooksResultsError=e;window.ControlledError=b;window.toast=function(d){const f=d.description||"An unknown error occurred",g=`${d.headerPrefix} `||"";let h,k;switch(d.code||3){case 3:h=`${g}Error`;k="toastError";break;case 2:h=`${g}Warning`;
k="toastWarning";break;case 1:h=`${g}Success`;k="toastSuccess";break;case 0:h=`${g}Information`,k="toastInformation"}M.toast({unsafeHTML:`<div>
                <div class="font-size-16 text-bold mb-2">
                    ${h}
                </div>
                <div class="font-size-14 line-height-24">
                    ${f}
                </div>
            </div>`,classes:`toastGeneral ${k} roundBox`})};window.toastError=function(d){d instanceof a?toast({description:d.message,headerPrefix:"Network",code:3}):d instanceof c&&toast({description:d.message,headerPrefix:"Server",code:3});console.error(d)};window.removeShimmer=function(d){$(d).removeClass("shimmerBG")};window.removeMinPicHeight=function(d){$(d).removeClass("minPicHeight")};448>$(window).width()&&toast({description:'Elements may appear glitched on mobile. Please use a computer, or try rotating your device into the horizontal orientation. View <a href="/help#master">help</a> for more details.',
headerPrefix:"Incompatibility",code:2})});
$(document).ready(function(){$('[data-editfield="customContactInfo_text"]').characterCounter();fetch("/api/v1/user/detail",{method:"GET",mode:"cors",headers:csrfprotect({"Content-Type":"application/json"})}).then(a=>{if(a.ok)return a.json();throw new NetworkError(a);}).then(a=>{if("success"!=a.status)throw new APIError(a);return a.data}).then(a=>{a=new b(a);a.populate();a.bindEditActions();a.bindSaveActions()}).catch(a=>{toastError(a)});class b{constructor(a){this.data=a}remove_loader(a){$(`[data-field="${a}"]`).addClass("hide").removeClass("shimmerBG")}unhide_container(a){$(`[data-field="${a}"]`).removeClass("hide")}hide_container(a){$(`[data-field="${a}"]`).addClass("hide")}bindEditAction(a){$(`[data-edit="${a}"]`).click(()=>
{$(`[data-section="${a}_display"]`).addClass("hide");$(`[data-edit="${a}"]`).addClass("hide");$(`[data-section="${a}_editor"]`).removeClass("hide");$(`[data-save="${a}"]`).removeClass("hide")})}update_profile(){$('[data-field="profilePic"]').attr("src",`${this.data.profilePic}=s172-c`);$('[data-field="name"]').html(this.data.name).removeClass("shimmerBG");this.data.cky?$('[data-field="cky"]').attr("data-tooltip","This user is a verified CKY student.").html("verified").addClass("verified"):$('[data-field="cky"]').attr("data-tooltip",
"This user may not be a CKY student.").html("warning").addClass("not-verified")}update_emailnotifications_edit(){$('[data-editfield="email_notifications"]').prop("checked",this.data.emailnotifications)}update_emailnotifications(){this.data.emailnotifications?$('[data-field="email_notifications"]').removeClass("not-negotiable").addClass("negotiable").html("check"):$('[data-field="email_notifications"]').removeClass("negotiable").addClass("not-negotiable").html("close");this.update_emailnotifications_edit()}update_payment_edit(){const a=
"cash octopus payme tapngo bankTransfer eCheque alipay wechatPay".split(" ");for(let c of a)this.data[c]?$(`[data-editfield="${c}"]`).prop("checked",!0):$(`[data-editfield="${c}"]`).prop("checked",!1)}update_payment(){const a="cash octopus payme tapngo bankTransfer eCheque alipay wechatPay".split(" ");let c=!1;for(let e of a)this.data[e]?(c=!0,$(`[data-field="${e}"]`).attr("src",`/static/img/payment/${e}.png`)):$(`[data-field="${e}"]`).attr("src","");c?$('[data-field="payment_information_loader"]').html("").addClass("hide"):
$('[data-field="payment_information_loader"]').html("Unset").removeClass("hide");this.update_payment_edit()}update_sellerDeliveryMethods_edit(){$('[data-editfield="inSchoolExchange"]').prop("checked",this.data.inSchoolExchange);$('[data-editfield="meetup"]').prop("checked",this.data.meetup);$('[data-editfield="delivery"]').prop("checked",this.data.delivery)}update_sellerDeliveryMethods(){this.data.inSchoolExchange?$('[data-field="inSchoolExchange"]').removeClass("hide"):$('[data-field="inSchoolExchange"]').addClass("hide");
this.data.meetup?$('[data-field="meetup"]').removeClass("hide"):$('[data-field="meetup"]').addClass("hide");this.data.delivery?$('[data-field="delivery"]').removeClass("hide"):$('[data-field="delivery"]').addClass("hide");this.data.inSchoolExchange||this.data.meetup||this.data.delivery?$('[data-field="seller_delivery_methods_loader"]').html("").addClass("hide"):$('[data-field="seller_delivery_methods_loader"]').html("Unset").removeClass("hide");this.update_sellerDeliveryMethods_edit()}update_sellerNegotiable_edit(){$('[data-editfield="negotiable"]').prop("checked",
this.data.negotiable)}update_sellerNegotiable(){this.data.negotiable?$('[data-field="negotiable"]').removeClass("not-negotiable").addClass("negotiable").html("check"):$('[data-field="negotiable"]').removeClass("negotiable").addClass("not-negotiable").html("close");this.update_sellerNegotiable_edit()}update_publicity_edit(){$('[data-editfield="public"]').prop("checked",this.data.public)}update_publicity(){this.data.public?($('[data-field="public"]').html("Public"),$('[data-field="public_icon"]').html("public").attr("data-tooltip",
"Everyone can see your information.")):($('[data-field="public"]').html("Private"),$('[data-field="public_icon"]').html("lock").attr("data-tooltip","Only you can see the information."));this.unhide_container("public_container");this.update_publicity_edit()}update_email(){this.data.email?($('[data-field="email"]').html(this.data.email),this.unhide_container("email_container")):this.hide_container("email_container")}update_discord_edit_text(){$('[data-editfield="discord_text"]').val(this.data.discord);
M.updateTextFields();$('[data-editfield="discord"]').is(":checked")?$('[data-editfieldgroup="discord"]').removeClass("hide"):$('[data-editfieldgroup="discord"]').addClass("hide")}update_discord_edit(){$('[data-editfield="discord"]').prop("checked",!!this.data.discord).click(()=>{this.update_discord_edit_text()});this.update_discord_edit_text()}update_discord(){this.data.discord?($('[data-field="discord_icon"]').attr("src","/static/img/contact/discord.png"),$('[data-field="discord"]').html(this.data.discord),
this.unhide_container("discord_container")):this.hide_container("discord_container");this.update_discord_edit()}update_instagram_edit_text(){$('[data-editfield="instagram_text"]').val(this.data.instagram);M.updateTextFields();$('[data-editfield="instagram"]').is(":checked")?$('[data-editfieldgroup="instagram"]').removeClass("hide"):$('[data-editfieldgroup="instagram"]').addClass("hide")}update_instagram_edit(){$('[data-editfield="instagram"]').prop("checked",!!this.data.instagram).click(()=>{this.update_instagram_edit_text()});
this.update_instagram_edit_text()}update_instagram(){this.data.instagram?($('[data-field="instagram_icon"]').attr("src","/static/img/contact/instagram.png"),$('[data-field="instagram"]').html(this.data.instagram),this.unhide_container("instagram_container")):this.hide_container("instagram_container");this.update_instagram_edit()}update_phone_edit_text(){$('[data-editfield="phone_text"]').val(this.data.phone);M.updateTextFields();$('[data-editfield="phone"]').is(":checked")?$('[data-editfieldgroup="phone"]').removeClass("hide"):
$('[data-editfieldgroup="phone"]').addClass("hide")}update_phone_edit(){$('[data-editfield="phone"]').prop("checked",!!this.data.phone).click(()=>{this.update_phone_edit_text()});$('[data-editfield="whatsapp"]').prop("checked",this.data.whatsapp);$('[data-editfield="signal"]').prop("checked",this.data.signal);$('[data-editfield="telegram"]').prop("checked",this.data.telegram);this.update_phone_edit_text()}update_phone(){this.data.phone?($('[data-field="phone"]').html(this.data.phone),this.data.whatsapp&&
$('[data-field="whatsapp"]').attr("src","/static/img/contact/whatsapp.png"),this.data.signal&&$('[data-field="signal"]').attr("src","/static/img/contact/signal.png"),this.data.telegram&&$('[data-field="telegram"]').attr("src","/static/img/contact/telegram.png"),this.unhide_container("phone_container")):this.hide_container("phone_container");this.update_phone_edit()}update_customContactInfo_edit_text(){$('[data-editfield="customContactInfo_text"]').val(this.data.customContactInfo);M.textareaAutoResize($('[data-editfield="customContactInfo_text"]'));
$('[data-editfield="customContactInfo"]').is(":checked")?$('[data-editfieldgroup="customContactInfo"]').removeClass("hide"):$('[data-editfieldgroup="customContactInfo"]').addClass("hide")}update_customContactInfo_edit(){$('[data-editfield="customContactInfo"]').prop("checked",!!this.data.customContactInfo).click(()=>{this.update_customContactInfo_edit_text()});this.update_customContactInfo_edit_text()}update_customContactInfo(){this.data.customContactInfo?($('[data-field="customContactInfo"]').html(this.data.customContactInfo),
this.unhide_container("customContactInfo_container")):this.hide_container("customContactInfo_container");this.update_customContactInfo_edit()}populate(){this.update_profile();this.remove_loader("email_notifications_loader");this.update_emailnotifications();this.remove_loader("payment_information_loader");this.update_payment();this.remove_loader("seller_delivery_methods_loader");this.update_sellerDeliveryMethods();this.remove_loader("seller_negotiable_loader");this.update_sellerNegotiable();this.remove_loader("contact_information_loader");
this.update_publicity();this.update_email();this.update_discord();this.update_instagram();this.update_phone();this.update_customContactInfo()}bindEditActions(){this.bindEditAction("email_notifications");this.bindEditAction("payment_information");this.bindEditAction("seller_delivery_methods");this.bindEditAction("seller_negotiable");this.bindEditAction("contact_information")}save_settings(a){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return yield fetch("api/v1/user/update",{method:"PATCH",
mode:"cors",headers:csrfprotect({"Content-Type":"application/json"}),body:JSON.stringify(a)}).then(c=>{if(!c.ok)throw new NetworkError;return c.json()}).then(c=>{if("success"==c.status)return toast({description:c.message,headerPrefix:"",code:1}),c.data;throw new APIError(c);}).catch(c=>{toastError(c);return null})})}save_visual(a){$(`[data-section="${a}_editor"]`).addClass("hide");$(`[data-save="${a}"]`).addClass("hide");$(`[data-section="${a}_display"]`).removeClass("hide");$(`[data-edit="${a}"]`).removeClass("hide")}getInput_emailnotifications(){let a=
{};a.emailnotifications=$('[data-editfield="email_notifications"]').is(":checked");return a}bindSaveAction_emailnotifications(){$('[data-save="email_notifications"]').click(()=>{const a=this.getInput_emailnotifications();this.save_settings(a).then(c=>{c&&(this.data=Object.assign(this.data,c),this.update_emailnotifications(),this.save_visual("email_notifications"))})})}getInput_payment(){let a={};a.cash=$('[data-editfield="cash"]').is(":checked");a.octopus=$('[data-editfield="octopus"]').is(":checked");
a.payme=$('[data-editfield="payme"]').is(":checked");a.tapngo=$('[data-editfield="tapngo"]').is(":checked");a.bankTransfer=$('[data-editfield="bankTransfer"]').is(":checked");a.wechatPay=$('[data-editfield="wechatPay"]').is(":checked");a.alipay=$('[data-editfield="alipay"]').is(":checked");a.eCheque=$('[data-editfield="eCheque"]').is(":checked");return a}bindSaveAction_payment(){$('[data-save="payment_information"]').click(()=>{const a=this.getInput_payment();this.save_settings(a).then(c=>{c&&(this.data=
Object.assign(this.data,c),this.update_payment(),this.save_visual("payment_information"))})})}getInput_sellerDeliveryMethods(){let a={};a.inSchoolExchange=$('[data-editfield="inSchoolExchange"]').is(":checked");a.meetup=$('[data-editfield="meetup"]').is(":checked");a.delivery=$('[data-editfield="delivery"]').is(":checked");return a}bindSaveAction_sellerDeliveryMethods(){$('[data-save="seller_delivery_methods"]').click(()=>{const a=this.getInput_sellerDeliveryMethods();this.save_settings(a).then(c=>
{c&&(this.data=Object.assign(this.data,c),this.update_sellerDeliveryMethods(),this.save_visual("seller_delivery_methods"))})})}getInput_sellerNegotiable(){let a={};a.negotiable=$('[data-editfield="negotiable"]').is(":checked");return a}bindSaveAction_sellerNegotiable(){$('[data-save="seller_negotiable"]').click(()=>{const a=this.getInput_sellerNegotiable();this.save_settings(a).then(c=>{c&&(this.data=Object.assign(this.data,c),this.update_sellerNegotiable(),this.save_visual("seller_negotiable"))})})}getInput_contactInformation(){let a=
{};a.public=$('[data-editfield="public"]').is(":checked");a.discord=$('[data-editfield="discord"]').is(":checked")?$('[data-editfield="discord_text"]').val():"";a.instagram=$('[data-editfield="instagram"]').is(":checked")?$('[data-editfield="instagram_text"]').val():"";a.phone=$('[data-editfield="phone"]').is(":checked")?$('[data-editfield="phone_text"]').val():"";a.whatsapp=$('[data-editfield="whatsapp"]').is(":checked");a.signal=$('[data-editfield="signal"]').is(":checked");a.telegram=$('[data-editfield="telegram"]').is(":checked");
a.customContactInfo=$('[data-editfield="customContactInfo"]').is(":checked")?$('[data-editfield="customContactInfo_text"]').val():"";return a}bindSaveAction_contactInformation(){$('[data-save="contact_information"]').click(()=>{const a=this.getInput_contactInformation();this.save_settings(a).then(c=>{c&&(this.data=Object.assign(this.data,c),this.update_publicity(),this.update_discord(),this.update_instagram(),this.update_phone(),this.update_customContactInfo(),this.save_visual("contact_information"))})})}bindSaveActions(){this.bindSaveAction_emailnotifications();
this.bindSaveAction_payment();this.bindSaveAction_sellerDeliveryMethods();this.bindSaveAction_sellerNegotiable();this.bindSaveAction_contactInformation()}}});
