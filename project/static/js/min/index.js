'use strict';var csrftoken=$("meta[name=csrf-token]").attr("content");window.csrfprotect=f=>{f["X-CSRFToken"]=csrftoken;return f};
$(document).ready(function(){$(".dropdown-trigger").dropdown({alignment:"right",constrainWidth:!1,coverTrigger:!1});$(".tooltipped").tooltip();M.updateTextFields();dayjs.extend(window.dayjs_plugin_utc);dayjs.extend(window.dayjs_plugin_relativeTime);window.Book=class{constructor(a){this.googleId=null==a?void 0:a.id;let d;this.title=null==a?void 0:null==(d=a.volumeInfo)?void 0:d.title;let e,b,c;this.isbn=null==a?void 0:null==(e=a.volumeInfo)?void 0:null==(b=e.industryIdentifiers)?void 0:null==(c=b.find(H=>
"ISBN_13"==H.type))?void 0:c.identifier;let g;this.authors=null==a?void 0:null==(g=a.volumeInfo)?void 0:g.authors;let h;this.language=null==a?void 0:null==(h=a.volumeInfo)?void 0:h.language;let k;this.publisher=null==a?void 0:null==(k=a.volumeInfo)?void 0:k.publisher;let l;this.publishedDate=null==a?void 0:null==(l=a.volumeInfo)?void 0:l.publishedDate;let m;this.pageCount=null==a?void 0:null==(m=a.volumeInfo)?void 0:m.pageCount;let n,p;this.height=null==a?void 0:null==(n=a.volumeInfo)?void 0:null==
(p=n.dimensions)?void 0:p.height;let q,r;this.width=null==a?void 0:null==(q=a.volumeInfo)?void 0:null==(r=q.dimensions)?void 0:r.width;let t,u;this.thickness=null==a?void 0:null==(t=a.volumeInfo)?void 0:null==(u=t.dimensions)?void 0:u.thickness;let v;this.imagelinks=null==a?void 0:null==(v=a.volumeInfo)?void 0:v.imageLinks;let w,x;this.thumbSmall=null==(w=this.imagelinks)?void 0:null==(x=w.smallThumbnail)?void 0:x.replace("http","https");let y,z,A,B,C,D;this.thumbLarge=(null==(y=this.imagelinks)?
0:y.extraLarge)?this.imagelinks.extraLarge:(null==(z=this.imagelinks)?0:z.large)?this.imagelinks.large:(null==(A=this.imagelinks)?0:A.medium)?this.imagelinks.medium:(null==(B=this.imagelinks)?0:B.small)?this.imagelinks.small:(null==(C=this.imagelinks)?0:C.thumbnail)?this.imagelinks.thumbnail:null==(D=this.imagelinks)?void 0:D.smallThumbnail;let E;this.thumbLarge=null==(E=this.thumbLarge)?void 0:E.replace("http","https");this.strings={};this.strings.title=this.title||"Unknown";this.strings.isbn=this.isbn||
"Unknown";this.strings.authors=this.authors?this.authors.join(this.language&&this.language.includes("en")?", ":"„ÄÅ"):"Unknown";this.strings.plurality=this.authors?1<this.authors.length?"s":"":"";this.strings.publisher=this.publisher||"Unknown";this.strings.publishedDate=this.publishedDate||"Unknown";this.strings.pageCount=this.pageCount||"Unknown";this.strings.dimensions=this.height&&this.width&&this.thickness?`Height - ${this.height}, Width - ${this.width}, Thickness - ${this.thickness}`:"Unknown";
this.strings.thumbSmall=this.thumbSmall?this.thumbSmall:this.thumbLarge?this.thumbLarge:"https://books.google.com.hk/googlebooks/images/no_cover_thumb.gif"}};window.Listing=class{constructor(a){for(const d in a)this[d]=a[d];this.strings={};a=dayjs(1E3*this.created).local();this.strings.created=`${a.format("DD/MM/YYYY HH:mm:ss")} (${a.fromNow()})`;this.strings.open=this.open?"Public":"Hidden";this.strings.openIcon=this.open?"visibility":"visibility_off";switch(this.condition){case 0:this.strings.condition=
"Poor";this.strings.conditionDescription="Significant wear, possibly with a broken spine, loose joints or missing pages";this.strings.conditionClass="condition-poor";break;case 1:this.strings.condition="Fair";this.strings.conditionDescription="Some wear, possibly with folded pages, scratches or dents";this.strings.conditionClass="condition-fair";break;case 2:this.strings.condition="Good";this.strings.conditionDescription="Minor wear, but will still show signs of previous ownership";this.strings.conditionClass=
"condition-good";break;case 3:this.strings.condition="Fine",this.strings.conditionDescription="Very minor defects and faults, like brand new",this.strings.conditionClass="condition-fine"}switch(this.notes){case 0:this.strings.notes="None";break;case 1:this.strings.notes="Some";break;case 2:this.strings.notes="Comprehensive"}this.strings.price=`HKD ${this.price}`;this.strings.remarks=this.remarks||"---"}};class f extends Error{constructor(a){super(a)}}class F extends Error{constructor(a){super(a);
this.message=`${a.status}: ${a.statusText}`}}class G extends Error{constructor(a){super(a);this.message=`${a.code}: ${a.message}`}}class I extends Error{constructor(){super();this.message="No results found."}}window.NetworkError=F;window.APIError=G;window.NoGoogleBooksResultsError=I;window.ControlledError=f;window.toast=function(a){const d=a.description||"An unknown error occurred",e=`${a.headerPrefix} `||"";let b,c;switch(a.code||3){case 3:b=`${e}Error`;c="toastError";break;case 2:b=`${e}Warning`;
c="toastWarning";break;case 1:b=`${e}Success`;c="toastSuccess";break;case 0:b=`${e}Information`,c="toastInformation"}M.toast({unsafeHTML:`<div>
                <div class="font-size-16 text-bold mb-2">
                    ${b}
                </div>
                <div class="font-size-14 line-height-24">
                    ${d}
                </div>
            </div>`,classes:`toastGeneral ${c} roundBox`})};window.toastError=function(a){a instanceof F?toast({description:a.message,headerPrefix:"Network",code:3}):a instanceof G&&toast({description:a.message,headerPrefix:"Server",code:3});console.error(a)};window.removeShimmer=function(a){$(a).removeClass("shimmerBG")};window.removeMinPicHeight=function(a){$(a).removeClass("minPicHeight")};448>$(window).width()&&toast({description:'Elements may appear glitched on mobile. Please use a computer, or try rotating your device into the horizontal orientation. View <a href="/help#master">help</a> for more details.',
headerPrefix:"Incompatibility",code:2})});$(".show-1").css("opacity",1);setTimeout(()=>{$(".show-2").css("opacity",1)},500);
